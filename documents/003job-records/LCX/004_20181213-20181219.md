#### 工作记录 004
**2018.12.13 - 2018.12.19**

---

完成了部分数据库设计（`tool_t`部分泛化关系的设计需要验证）

![ER](https://thumbnail0.baidupcs.com/thumbnail/9a17dafb104087fcf7ac1664b3631682?fid=1748887248-250528-522830955506651&time=1545217200&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-vsolOfgO2F10xDbt5TLnkQ0F4HA%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=8182650869027443928&dp-callid=0&size=c710_u400&quality=100&vuk=-&ft=video)

![EER](https://thumbnail0.baidupcs.com/thumbnail/0d0390bcc2f3c1ca4a7aa7d404672733?fid=1748887248-250528-193533617101777&time=1545217200&rt=sh&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-WH7gxMjSrw0TpKMgqRUmX01KNUE%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=8182388108545700323&dp-callid=0&size=c710_u400&quality=100&vuk=-&ft=video)

---

**头脑风暴：**

1. 使用redis来缓存数据

2. 对搜索进行记录，比如：某个工具被搜索了x次，把搜索次数作为受欢迎度的一个指标；

3. 记录用户对某工具的搜索，可以在一定程度反映用户的类型，比如：某用户对某工具搜索了X次，个性化推荐时可能用到；

4. 设置用户标签表，系统根据用户的行为，自动给用户贴标签，方便后期推荐系统工作；

5. 工具推荐、意见反馈，我觉得游客也应该具备这个功能；因为很少有人会注册帐号，所以为了方便用户提交数据，不设置限制；如果是我，我发现有好用的工具，或者想提交意见，发现需要注册才能执行操作，那我干脆放弃，懒得注册。很少有人会为了提交个意见或者推荐工具而注册个账号。但是如果用户注册了账号，那就应该绑定账号信息，让其可以查到相关记录；

6. 如果要加入多种类型的资源，那就需要抽象出公共的表达；资源（父类），工具（子类），API（子类），还有其他子类，这些子类在页面的公共表达（信息展示）是什么？

7. `message_t`中的`msg_type`，`manage_history_t`中的`action_type`为code，后期通过视图来关联`lookup_value_t`以获取meaning；

8. 搜索框分为：资源名称[   ]，版本[   ]，当用户在前面的“资源名称”中输入数据后，比如：输入"Eclipse"，然后系统自动发请求，去获取平台中支持的eclipse的版本号，这样当用户在“版本”中输入数据时，可以动态提示当前平台对该工具支持的版本号；

9. 需要验证：后端数据库中直接保存json串，然后前端使用js动态显示结构，是否可行？或者有其他方案？
起因：考虑第6点，将所有资源抽象出几个公共的属性：资源名称、版本、官网、下载地址；其中“下载地址”是可变的部分，我打算使用json直接保存在数据库中，比如对于Eclipse，其下载地址字段的内容如下：（校验码部分是否也需要考虑一下？）
```js
{
  "win32":"xxx",
  "win64":"yyy",
  "linux32":"xxx",
  "linux64":"yyy",
  "macos":"xxx"
}
```
而对于一些API DOC，其下载地址字段内容如下：
```js
{
  "zip":"xxx.zip",
  "tar.gz":"yyy.tar.gz",
}
// 或者直接：
{
  "xxx.zip",
  "xxx.tar.gz"
}
```
想要实现在前端用js将这些内容动态显示到页面，即可以根据数据的内容（格式不同）在页面上展示不同的效果；感觉这个需求与NoSQL所能提供的功能类似；
